(function(e){function t(t){for(var i,a,n=t[0],l=t[1],c=t[2],p=0,m=[];p<n.length;p++)a=n[p],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&m.push(s[a][0]),s[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);h&&h(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],i=!0,n=1;n<o.length;n++){var l=o[n];0!==s[l]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=o[0]))}return e}var i={},s={index:0},r=[];function a(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=i,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(o,i,function(t){return e[t]}.bind(null,i));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var h=l;r.push([0,"chunk-vendors","chunk-common"]),o()})({0:function(e,t,o){e.exports=o("56d7")},1368:function(e,t,o){"use strict";var i=o("287d"),s=o.n(i);s.a},"287d":function(e,t,o){},"3b54":function(e,t,o){"use strict";(function(e){o("d81d"),o("a434"),o("3495");var i=o("54a1"),s=o("2cd5"),r=o("a026");t["a"]={name:"modify_option",components:{loadings:i["a"]},data:function(){return{page_setting:{access_token:"",refresh_token:"",language:""},problem:{problemId:"",title:"",isUsed:"",isSpj:"",timeLimit:0,memoryLimit:0,category:[{cateId:0}],source:[{sourceId:0}]},modify:!1,category:{category:"",dialogVisible:!1,preCategory:"",lineCategory:[]},source:{source:"",dialogVisible:!1,preSource:"",lineSource:[]}}},methods:{last_step:function(){1==this.modify?this.dialogVisible=!0:this.edit(0,2)},edit:function(e,t){0==e?this.$router.push({path:"/problem/problem/modify_content",query:{pid:this.$route.query.pid}}):this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/problem/modify_option",{problem_id:this.problem.problemId,is_used:this.problem.isUsed,time_limit:this.problem.timeLimit,memory_limit:1024*this.problem.memoryLimit,is_spj:this.problem.isSpj,category:JSON.stringify(this.problem.category),source:JSON.stringify(this.problem.source)},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(e){var o=e.body.OJ_ERROR_TYPE;if(o==this.GLOBAL.OJ_ERROR_NO_ERROR){this.$message({message:"操作成功",type:"success"});var i=e.body.OJ_USER_INFO.saved,r=e.headers.map["oj_access_token"][0],a=e.headers.map["oj_refresh_token"][0];i?(s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",r,7),s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",a,7)):(s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",r),s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",a)),1==t?this.$router.push({path:"/problem/problem/list"}):2==t&&this.$router.push({path:"/problem/problem/modify_content",query:{pid:this.$route.query.pid}})}else o==this.GLOBAL.OJ_ERROR_NOT_LOGIN?(this.$message.error("操作失败，您未登录"),window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html"):o==this.GLOBAL.OJ_ERROR_NON_EXISTENT_NEWS&&this.$message.error("无效的操作")}))},sureCate:function(){this.category.dialogVisible=!1,this.problem.category=this.category.preCategory,this.modify=!0},sureSour:function(){this.source.dialogVisible=!1,this.problem.source=this.source.preSource,this.modify=!0},chooseCate:function(){this.category.preCategory=this.problem.category;for(var e=0;e<this.category.lineCategory.length;e++)this.category.lineCategory[e].check=!1;for(var t=0;t<this.category.preCategory.length;t++){var o=this.getCheckCateId(this.category.preCategory[t].cateId);this.category.lineCategory[o].check=!0}this.category.dialogVisible=!0},chooseSour:function(){this.source.preSource=this.problem.source;for(var e=0;e<this.source.lineSource.length;e++)this.source.lineSource[e].check=!1;for(var t=0;t<this.source.preSource.length;t++){var o=this.getCheckSourId(this.source.preSource[t].sourceId);this.source.lineSource[o].check=!0}this.source.dialogVisible=!0},getCheckCateId:function(e){var t=0,o=this.category.lineCategory.length-1;while(t<o){var i=t+o>>1;this.category.lineCategory[i].cateId<e?t=i+1:o=i}return t},getCheckSourId:function(e){var t=0,o=this.source.lineSource.length-1;while(t<o){var i=t+o>>1;this.source.lineSource[i].sourceId<e?t=i+1:o=i}return t},delCate:function(e){this.problem.category.splice(e,1),this.modify=!0},delSour:function(e){this.problem.source.splice(e,1),this.modify=!0},upPreCate:function(){this.category.preCategory=[];for(var e=0;e<this.category.lineCategory.length;e++)this.category.lineCategory[e].check&&this.category.preCategory.push(this.category.lineCategory[e])},upPreSour:function(){this.source.preSource=[];for(var e=0;e<this.source.lineSource.length;e++)this.source.lineSource[e].check&&this.source.preSource.push(this.source.lineSource[e])},delPreCate:function(e){var t=this.getCheckCateId(e);this.category.lineCategory[t].check=!1,this.upPreCate()},delPreSour:function(e){var t=this.getCheckSourId(e);this.source.lineSource[t].check=!1,this.upPreSour()},random_color:function(){var e=new Array("#F44336","#ff9800","#4CAF50","#8bc34a","#00bcd4","#2196F3","#9c27b0","#3f51b5","#009688","#e91e63"),t=Math.floor((Math.random()*e.length^Math.random()*e.length^Math.random()*e.length)%e.length);return e[t]}},created:function(){null!=this.$route.query.pid&&""!=this.$route.query.pid||this.$router.push({path:"/problem/problem/list"}),this.page_setting.access_token=s["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token"),this.page_setting.refresh_token=s["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token"),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/problem/home/modify_option",{problem_id:this.$route.query.pid},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(t){console.log(t.body);var o=t.body.OJ_ERROR_TYPE;if(o==this.GLOBAL.OJ_ERROR_NO_ERROR){this.problem=t.body.OJ_PROBLEM,this.problem.isUsed=this.problem.isUsed+"",this.problem.isSpj=this.problem.isSpj+"",this.problem.memoryLimit/=1024,console.log(this.problem),this.category.category=t.body.OJ_CATEGORY,this.source.source=t.body.OJ_SOURCE;for(var i=0;i<this.category.category.length;i++){for(var a=0;a<this.category.category[i].root.length;a++)r["a"].set(this.category.category[i].root[a],"color",this.random_color()),r["a"].set(this.category.category[i].root[a],"check",!1),r["a"].set(this.category.lineCategory,this.category.lineCategory.length,this.category.category[i].root[a]),console.log(this.category.category[i].root[a]);for(var n=0;n<this.category.category[i].noroot.length;n++)for(var l=0;l<this.category.category[i].noroot[n].root.length;l++)r["a"].set(this.category.category[i].noroot[n].root[l],"color",this.random_color()),r["a"].set(this.category.category[i].noroot[n].root[l],"check",!1),r["a"].set(this.category.lineCategory,this.category.lineCategory.length,this.category.category[i].noroot[n].root[l])}for(var c=0;c<this.source.source.length;c++){for(var h=0;h<this.source.source[c].root.length;h++)r["a"].set(this.source.source[c].root[h],"color",this.random_color()),r["a"].set(this.source.source[c].root[h],"check",!1),r["a"].set(this.source.lineSource,this.source.lineSource.length,this.source.source[c].root[h]),console.log(this.source.source[c].root[h]);for(var p=0;p<this.source.source[c].noroot.length;p++)for(var m=0;m<this.source.source[c].noroot[p].root.length;m++)r["a"].set(this.source.source[c].noroot[p].root[m],"color",this.random_color()),r["a"].set(this.source.source[c].noroot[p].root[m],"check",!1),r["a"].set(this.source.lineSource,this.source.lineSource.length,this.source.source[c].noroot[p].root[m])}this.category.lineCategory.sort((function(e,t){return e.cateId-t.cateId})),this.source.lineSource.sort((function(e,t){return e.sourceId-t.sourceId}));for(var u=0;u<this.problem.category.length;u++){var d=this.getCheckCateId(this.problem.category[u].cateId);this.category.lineCategory[d].check=!0,r["a"].set(this.problem.category[u],"color",this.category.lineCategory[d].color)}for(var _=0;_<this.problem.source.length;_++){var g=this.getCheckSourId(this.problem.source[_].sourceId);this.source.lineSource[g].check=!0,r["a"].set(this.problem.source[_],"color",this.source.lineSource[g].color)}this.category.preCategory=this.problem.category,this.source.preSource=this.problem.source,console.log(this.source.lineSource);var b=t.body.OJ_USER_INFO.saved,f=t.headers.map["oj_access_token"][0],O=t.headers.map["oj_refresh_token"][0];b?(s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",f,7),s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",O,7)):(s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",f),s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",O))}else o==this.GLOBAL.OJ_ERROR_NOT_LOGIN&&(window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html");e("html,body").animate({scrollTop:"0px"},0)}),(function(){e("html,body").animate({scrollTop:"0px"},0)}))}}}).call(this,o("1157"))},"3ed7":function(e,t,o){"use strict";(function(e){o("d81d"),o("a434"),o("3495");var i=o("54a1"),s=o("2cd5"),r=o("ff41"),a=o.n(r);t["a"]={name:"add_content",components:{loadings:i["a"]},data:function(){return{page_setting:{access_token:"",refresh_token:"",language:""},problem:{problemId:"",title:"",problemDescribe:"",inputDescribe:"",outputDescribe:"",hint:"",creatorNick:"",sampleNum:1,sampleIO:[{sample_I:"",sample_O:""}]},user:{nick:""},vditor:{problemDesciption:"",inputDescription:"",outputDescription:"",hint:""},dialogVisible:!1}},methods:{edit:function(){this.problem.problemDescribe=this.vditor.problemDesciption.getValue(),this.problem.inputDescribe=this.vditor.inputDescription.getValue(),this.problem.outputDescribe=this.vditor.outputDescription.getValue(),this.problem.hint=this.vditor.hint.getValue(),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/problem/add_content",{title:this.problem.title,problem_describe:this.problem.problemDescribe,input_describe:this.problem.inputDescribe,output_describe:this.problem.outputDescribe,hint:this.problem.hint,sampleIO:JSON.stringify(this.problem.sampleIO)},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(e){var t=e.body.OJ_ERROR_TYPE;if(t==this.GLOBAL.OJ_ERROR_NO_ERROR){this.$message({message:"操作成功",type:"success"}),this.problem.problemId=e.body.OJ_PROBLEM_ID;var o=e.body.OJ_USER_INFO.saved,i=e.headers.map["oj_access_token"][0],r=e.headers.map["oj_refresh_token"][0];o?(s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i,7),s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",r,7)):(s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i),s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",r)),this.$router.push({path:"/problem/problem/add_option",query:{pid:this.problem.problemId}})}else t==this.GLOBAL.OJ_ERROR_NOT_LOGIN?(this.$message.error("操作失败，您未登录"),window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html"):t==this.GLOBAL.OJ_ERROR_NON_EXISTENT_NEWS&&this.$message.error("无效的操作")}))},addSample:function(){this.problem.sampleIO.push({sample_I:"",sample_O:""}),this.problem.sampleNum=this.problem.sampleIO.length},delSample:function(e){this.problem.sampleIO.splice(e,1),this.problem.sampleNum=this.problem.sampleIO.length}},created:function(){this.page_setting.access_token=s["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token"),this.page_setting.refresh_token=s["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token"),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/problem/home/add_content",{},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(t){var o=t.body.OJ_ERROR_TYPE;if(o==this.GLOBAL.OJ_ERROR_NO_ERROR){this.user=t.body.OJ_USER_INFO;var i=t.body.OJ_USER_INFO.saved,r=t.headers.map["oj_access_token"][0],a=t.headers.map["oj_refresh_token"][0];i?(s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",r,7),s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",a,7)):(s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",r),s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",a))}else o==this.GLOBAL.OJ_ERROR_NOT_LOGIN&&(window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html");e("html,body").animate({scrollTop:"0px"},0)}),(function(){e("html,body").animate({scrollTop:"0px"},0)}))},mounted:function(){this.vditor.problemDesciption=new a.a("problem-description",{height:400,cache:{enable:!1},toolbarConfig:{pin:!0},tab:"\t",preview:{math:{inlineDigit:!0},markdown:{mark:!0},hljs:{style:"abap",lineNumber:!0}},counter:{enable:!0,type:"text"}}),this.vditor.inputDescription=new a.a("input-description",{height:400,cache:{enable:!1},toolbarConfig:{pin:!0},tab:"\t",preview:{math:{inlineDigit:!0},markdown:{mark:!0},hljs:{style:"abap",lineNumber:!0}},counter:{enable:!0,type:"text"}}),this.vditor.outputDescription=new a.a("output-description",{height:400,cache:{enable:!1},toolbarConfig:{pin:!0},tab:"\t",preview:{math:{inlineDigit:!0},markdown:{mark:!0},hljs:{style:"abap",lineNumber:!0}},counter:{enable:!0,type:"text"}}),this.vditor.hint=new a.a("hint",{height:400,cache:{enable:!1},toolbarConfig:{pin:!0},tab:"\t",preview:{math:{inlineDigit:!0},markdown:{mark:!0},hljs:{style:"abap",lineNumber:!0}},counter:{enable:!0,type:"text"}})}}}).call(this,o("1157"))},"50eb":function(e,t,o){"use strict";var i=o("9ba3"),s=o.n(i);s.a},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var i=o("a026"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{style:{display:e.page_setting.login?"":"none"},attrs:{id:"index"}},[o("el-row",{staticClass:"tac"},[o("el-col",{attrs:{span:4}},[o("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{height:"100vh",overflow:"auto",width:"240px",position:"fixed"},attrs:{"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:e.handleOpen,close:e.handleClose}},[o("el-submenu",{attrs:{index:"1"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-location"}),o("span",[e._v("公告")])]),o("el-menu-item-group",[o("router-link",{attrs:{to:"/news/news/list"}},[o("el-menu-item",{attrs:{index:"1-1",actives:0==e.$route.name.indexOf("news_")}},[e._v("公告 ")])],1),o("el-menu-item",{attrs:{index:"1-2"}},[e._v("轮播图")])],1)],2),o("el-submenu",{attrs:{index:"2"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-location"}),o("span",[e._v("题目")])]),o("el-menu-item-group",[o("router-link",{attrs:{to:"/problem/problem/list"}},[o("el-menu-item",{attrs:{index:"2-1",actives:0==e.$route.name.indexOf("problem_")}},[e._v("题目 ")])],1),o("el-menu-item",{attrs:{index:"2-2"}},[e._v("分类")])],1)],2),o("el-menu-item",{attrs:{index:"3",disabled:""}},[o("i",{staticClass:"el-icon-document"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航三")])]),o("el-menu-item",{attrs:{index:"4"}},[o("i",{staticClass:"el-icon-setting"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航四")])])],1)],1),o("el-col",{staticStyle:{"padding-left":"240px"},attrs:{span:24}},[o("el-menu",{staticClass:"el-menu-demo",staticStyle:{position:"fixed",top:"0px",width:"100%","z-index":"9999"},attrs:{mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[0==e.$route.name.indexOf("news_")?[o("el-menu-item",{attrs:{index:"1",actives:"news_list"==e.$route.name},on:{click:function(t){return e.$router.push({path:"/news/news/list"})}}},[e._v("公告列表 ")]),o("el-menu-item",{attrs:{index:"2",actives:"news_add"==e.$route.name},on:{click:function(t){return e.$router.push({path:"/news/news/add"})}}},[e._v("添加公告 ")]),o("el-menu-item",{attrs:{index:"3",actives:"news_modify"==e.$route.name,disabled:"news_modify"!=e.$route.name}},[e._v("修改公告 ")])]:e._e(),0==e.$route.name.indexOf("problem_")?[o("el-menu-item",{attrs:{index:"1",actives:"problem_list"==e.$route.name},on:{click:function(t){return e.$router.push({path:"/problem/problem/list"})}}},[e._v("题目列表 ")]),o("el-menu-item",{attrs:{index:"2",actives:"problem_add_content"==e.$route.name||"problem_add_option"==e.$route.name},on:{click:function(t){return e.$router.push({path:"/problem/problem/add_content"})}}},[e._v(" 添加题目 ")]),o("el-menu-item",{attrs:{index:"3",actives:"problem_modify_content"==e.$route.name||"problem_modify_option"==e.$route.name||"problem_modify_testcase"==e.$route.name,disabled:"problem_modify_content"!=e.$route.name&&"problem_modify_option"!=e.$route.name&&"problem_modify_testcase"!=e.$route.name}},[e._v(" 修改题目 ")])]:e._e()],2),o("el-main",[o("router-view")],1)],1)],1)],1)},r=[],a=(o("d81d"),o("3495"),o("2cd5")),n={name:"App",data:function(){return{page_setting:{access_token:"",refresh_token:"",login:!1},now:1}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)}},created:function(){this.page_setting.access_token=a["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token"),this.page_setting.refresh_token=a["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token");var e=localStorage.getItem(this.GLOBAL.OJ_DEFAULT_NAME+"lang");null!=e&&(this.page_setting.language=e),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/home/index",{language:this.page_setting.language},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(t){var o=t.body.OJ_ERROR_TYPE;if(o==this.GLOBAL.OJ_ERROR_NO_ERROR){this.page_setting.login=!0;var i=t.body.OJ_USER_INFO.saved,s=t.headers.map["oj_access_token"][0],r=t.headers.map["oj_refresh_token"][0];i?(a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",s,7),a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",r,7)):(a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",s),a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",r))}else o==this.GLOBAL.OJ_ERROR_NOT_LOGIN&&(window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html");e=t.body.OJ_LANGUAGE_TYPE,localStorage.setItem(this.GLOBAL.OJ_DEFAULT_NAME+"lang",e),this.$i18n.locale=e}))}},l=n,c=(o("1368"),o("2877")),h=Object(c["a"])(l,s,r,!1,null,null,null),p=h.exports,m=o("a925"),u=o("8c4f"),d=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},_=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"layui-card"},[o("div",{staticClass:"layui-card-header"},[e._v("公告列表")]),o("div",{staticClass:"layui-card-body"},[o("table",{staticClass:"layui-hide",attrs:{id:"demo","lay-filter":"demo"}})])])])}],g={name:"index",data:function(){return{news:null}},methods:{updata:function(){var e=this;layui.use("table",(function(){var t=layui.table;t.render({elem:"#demo",defaultToolbar:["filter","exports","print",{title:"提示",layEvent:"LAYTABLE_TIPS",icon:"layui-icon-tips"}],cols:[[{type:"checkbox",fixed:"left"},{field:"id",title:"ID",width:80,sort:!0,fixed:"left",unresize:!0},{field:"title",title:"标题",width:120},{field:"content",title:"内容",minWidth:150},{field:"date",title:"创建时间",minWidth:160},{field:"used",title:"是否发布",width:80},{field:"user",title:"创建用户",width:100},{fixed:"right",title:"操作",toolbar:"#barDemo",width:150}]],data:e.test,even:!0,page:!0}),t.on("toolbar(demo)",(function(e){var o,i=t.checkStatus(e.config.id);switch(e.event){case"getCheckData":o=i.data,layer.alert(JSON.stringify(o));break;case"getCheckLength":o=i.data,layer.msg("选中了："+o.length+" 个");break;case"isAll":layer.msg(i.isAll?"全选":"未全选");break;case"LAYTABLE_TIPS":layer.alert("这是工具栏右侧自定义的一个图标按钮");break}})),t.on("tool(demo)",(function(e){var t=e.data;console.log(e),"del"===e.event?layer.confirm("真的删除行么",(function(t){e.del(),layer.close(t)})):"edit"===e.event&&layer.prompt({formType:2,value:t.email},(function(t,o){e.update({email:t}),layer.close(o)}))}))}))}},created:function(){this.haha()}},b=g,f=Object(c["a"])(b,d,_,!1,null,"ca7a8d8a",null),O=f.exports,y=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"news-list"}},[o("loadings"),o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"60px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.news,"cell-style":"cursor: pointer"}},[o("el-table-column",{attrs:{label:"ID",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{on:{click:function(o){return e.showNews(t.$index)}}},[e._v(e._s(t.row.newsId))])]}}])}),o("el-table-column",{attrs:{label:"标题",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{on:{click:function(o){return e.showNews(t.$index)}}},[e._v(e._s(t.row.title))])]}}])}),o("el-table-column",{attrs:{label:"内容",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{on:{click:function(o){return e.showNews(t.$index)}}},[e._v(e._s(e.delHtmlTag(t.row.content)))])]}}])}),o("el-table-column",{attrs:{label:"创建时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{on:{click:function(o){return e.showNews(t.$index)}}},[e._v(e._s(e.format_time(t.row.publishTime)))])]}}])}),o("el-table-column",{attrs:{label:"是否发布",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-switch",{staticStyle:{"margin-top":"-4px"},attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(o){return e.switchNewsState(t.row.newsId,"0"==t.row.isUsed?0:1,t.$index)}},model:{value:t.row.isUsed,callback:function(o){e.$set(t.row,"isUsed",o)},expression:"scope.row.isUsed"}})]}}])}),o("el-table-column",{attrs:{label:"发布用户",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{on:{click:function(o){return e.showNews(t.$index)}}},[e._v(e._s(t.row.publisherNick))])]}}])}),o("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{staticStyle:{padding:"4px 8px","margin-right":"5px"},attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.preEdit(t.row.newsId)}}},[e._v("编辑 ")]),o("el-button",{staticStyle:{padding:"4px 8px"},attrs:{type:"danger",size:"mini"},on:{click:function(o){return e.preDele(t.$index)}}},[e._v("删除 ")])]}}])})],1)],1),o("el-dialog",{attrs:{title:e.news[e.show.now].title,visible:e.show.dialogVisible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.show,"dialogVisible",t)}}},[o("span",{domProps:{innerHTML:e._s(e.news[e.show.now].content)}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.show.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},k=[],E=(o("ac1f"),o("5319"),o("54a1")),L={name:"news",components:{loadings:E["a"]},data:function(){return{page_setting:{access_token:"",refresh_token:"",language:""},news:[{content:"",title:"",importance:0,isUsed:"0",publishTime:0,publisherNick:""}],show:{now:0,dialogVisible:!1},dele:{now:0,dialogVisible:!1}}},methods:{preEdit:function(e){this.$router.push({path:"/news/news/modify",query:{nid:e}})},showNews:function(e){this.show.now=e,this.show.dialogVisible=!0},preDele:function(e){this.dele.now=e,this.dele.dialogVisible=!0},deleNews:function(e){this.dele.dialogVisible=!1,this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/news/dele",{news_id:e},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(e){var t=e.body.OJ_ERROR_TYPE;if(t==this.GLOBAL.OJ_ERROR_NO_ERROR){this.$message({message:"操作成功",type:"success"});var o=e.body.OJ_USER_INFO.saved,i=e.headers.map["oj_access_token"][0],s=e.headers.map["oj_refresh_token"][0];o?(a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i,7),a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s,7)):(a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i),a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s));var r=this;setTimeout((function(){r.$router.go(0)}),800)}else t==this.GLOBAL.OJ_ERROR_NOT_LOGIN?(this.$message.error("操作失败，您未登录"),window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html"):t==this.GLOBAL.OJ_ERROR_NON_EXISTENT_NEWS&&this.$message.error("无效的操作")}))},switchNewsState:function(e,t,o){this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/news/switch/statue",{is_used:t,news_id:e},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(e){var t=e.body.OJ_ERROR_TYPE;if(t==this.GLOBAL.OJ_ERROR_NO_ERROR){this.$message({message:"操作成功",type:"success"});var i=e.body.OJ_USER_INFO.saved,s=e.headers.map["oj_access_token"][0],r=e.headers.map["oj_refresh_token"][0];i?(a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",s,7),a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",r,7)):(a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",s),a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",r))}else t==this.GLOBAL.OJ_ERROR_NOT_LOGIN?(this.$message.error("操作失败，您未登录"),window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html"):t==this.GLOBAL.OJ_ERROR_NON_EXISTENT_NEWS&&(this.$message.error("无效的操作"),this.news[o].isUsed="0"==this.news[o].isUsed?"1":"0")}))},delHtmlTag:function(e){return e.replace(/<[^>]+>/g,"")},format_time:function(e){return a["a"].format_time(e)}},created:function(){this.page_setting.access_token=a["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token"),this.page_setting.refresh_token=a["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token"),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/news/home/list",{},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(e){console.log(e.body);var t=e.body.OJ_ERROR_TYPE;if(t==this.GLOBAL.OJ_ERROR_NO_ERROR){this.news=e.body.OJ_NEWS;var o=e.body.OJ_USER_INFO.saved,i=e.headers.map["oj_access_token"][0],s=e.headers.map["oj_refresh_token"][0];o?(a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i,7),a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s,7)):(a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i),a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s));for(var r=0;r<this.news.length;r++)this.news[r].isUsed=this.news[r].isUsed+""}else t==this.GLOBAL.OJ_ERROR_NOT_LOGIN&&(this.$message.error("操作失败，您未登录"),window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html")}))}},v=L,A=(o("66e7"),Object(c["a"])(v,y,k,!1,null,null,null)),S=A.exports,R=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"news-modify"}},[o("loadings"),o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"60px"}},[o("el-form",{ref:"form",staticStyle:{"margin-top":"15px"},attrs:{model:e.news,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{staticStyle:{width:"50%"},model:{value:e.news.title,callback:function(t){e.$set(e.news,"title",t)},expression:"news.title"}})],1),o("el-form-item",{attrs:{label:"创建时间"}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",disabled:!0},model:{value:e.news.publishTime,callback:function(t){e.$set(e.news,"publishTime",t)},expression:"news.publishTime"}})],1),o("el-form-item",{attrs:{label:"创建用户"}},[o("el-input",{staticStyle:{width:"30%"},attrs:{disabled:!0},model:{value:e.news.publisherNick,callback:function(t){e.$set(e.news,"publisherNick",t)},expression:"news.publisherNick"}})],1),o("el-form-item",{attrs:{label:"是否发布"}},[o("el-switch",{staticStyle:{"margin-top":"-4px"},attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.news.isUsed,callback:function(t){e.$set(e.news,"isUsed",t)},expression:"news.isUsed"}})],1),o("el-form-item",{attrs:{label:"内容"}},[o("div",{attrs:{id:"vditor"}})])],1),o("div",{staticStyle:{"text-align":"center","margin-top":"30px","margin-bottom":"20px"}},[o("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v("保存修改")])],1)],1)],1)},C=[],N=o("ff41"),T=o.n(N),w={name:"modify",components:{loadings:E["a"]},data:function(){return{page_setting:{access_token:"",refresh_token:"",language:""},news:{content:"",title:"",importance:0,isUsed:"0",publishTime:0,publisherNick:""},contentEditor:""}},methods:{edit:function(){this.news.content=this.contentEditor.getValue(),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/news/modify",{is_used:this.news.isUsed,news_id:this.news.newsId,title:this.news.title,content:this.news.content},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(e){var t=e.body.OJ_ERROR_TYPE;if(t==this.GLOBAL.OJ_ERROR_NO_ERROR){this.$message({message:"操作成功",type:"success"});var o=e.body.OJ_USER_INFO.saved,i=e.headers.map["oj_access_token"][0],s=e.headers.map["oj_refresh_token"][0];o?(a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i,7),a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s,7)):(a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i),a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s)),this.$router.push({path:"/news/news/list"})}else t==this.GLOBAL.OJ_ERROR_NOT_LOGIN?(this.$message.error("操作失败，您未登录"),window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html"):t==this.GLOBAL.OJ_ERROR_NON_EXISTENT_NEWS&&this.$message.error("无效的操作")}))}},mounted:function(){this.contentEditor=new T.a("vditor",{height:500,cache:{enable:!1},toolbarConfig:{pin:!0},tab:"\t",preview:{math:{inlineDigit:!0},markdown:{mark:!0},hljs:{style:"abap",lineNumber:!0}},counter:{enable:!0,type:"text"}})},created:function(){null!=this.$route.query.nid&&""!=this.$route.query.nid||this.$router.push({path:"/news/news/list"}),this.page_setting.access_token=a["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token"),this.page_setting.refresh_token=a["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token"),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/news/home/modify",{news_id:this.$route.query.nid},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(e){console.log(e.body);var t=e.body.OJ_ERROR_TYPE;if(t==this.GLOBAL.OJ_ERROR_NO_ERROR){this.news=e.body.OJ_NEWS,this.news.isUsed=this.news.isUsed+"",this.contentEditor.setValue(this.news.content);var o=e.body.OJ_USER_INFO.saved,i=e.headers.map["oj_access_token"][0],s=e.headers.map["oj_refresh_token"][0];o?(a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i,7),a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s,7)):(a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i),a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s))}else t==this.GLOBAL.OJ_ERROR_NOT_LOGIN&&a["a"].init_account_controller(this.GLOBAL.OJ_GROUP_NORMAL_VISITOR)}))}},J=w,x=Object(c["a"])(J,R,C,!1,null,"1d9808d9",null),I=x.exports,B=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"news-add"}},[o("loadings"),o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"60px"}},[o("el-form",{ref:"form",staticStyle:{"margin-top":"15px"},attrs:{model:e.news,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{staticStyle:{width:"50%"},model:{value:e.news.title,callback:function(t){e.$set(e.news,"title",t)},expression:"news.title"}})],1),o("el-form-item",{attrs:{label:"是否发布"}},[o("el-switch",{staticStyle:{"margin-top":"-4px"},attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.news.isUsed,callback:function(t){e.$set(e.news,"isUsed",t)},expression:"news.isUsed"}})],1),o("el-form-item",{attrs:{label:"内容"}},[o("div",{attrs:{id:"vditor"}})])],1),o("div",{staticStyle:{"text-align":"center","margin-top":"30px","margin-bottom":"20px"}},[o("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加")])],1)],1)],1)},F=[],G={name:"add",components:{loadings:E["a"]},data:function(){return{page_setting:{access_token:"",refresh_token:"",language:""},news:{content:"",title:""},contentEditor:""}},methods:{add:function(){this.news.content=this.contentEditor.getValue(),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/news/add",{is_used:this.news.isUsed,title:this.news.title,content:this.news.content},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(e){var t=e.body.OJ_ERROR_TYPE;if(t==this.GLOBAL.OJ_ERROR_NO_ERROR){this.$message({message:"操作成功",type:"success"});var o=e.body.OJ_USER_INFO.saved,i=e.headers.map["oj_access_token"][0],s=e.headers.map["oj_refresh_token"][0];o?(a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i,7),a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s,7)):(a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i),a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s)),this.$router.push({path:"/news/news/list"})}else t==this.GLOBAL.OJ_ERROR_NOT_LOGIN?(this.$message.error("操作失败，您未登录"),window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html"):t==this.GLOBAL.OJ_ERROR_NON_EXISTENT_NEWS&&this.$message.error("无效的操作")}))}},mounted:function(){this.contentEditor=new T.a("vditor",{height:500,cache:{enable:!1},toolbarConfig:{pin:!0},tab:"\t",preview:{math:{inlineDigit:!0},markdown:{mark:!0},hljs:{style:"abap",lineNumber:!0}},counter:{enable:!0,type:"text"}})},created:function(){this.page_setting.access_token=a["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token"),this.page_setting.refresh_token=a["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token"),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/news/home/add",{},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(e){var t=e.body.OJ_ERROR_TYPE;if(t==this.GLOBAL.OJ_ERROR_NO_ERROR){var o=e.body.OJ_USER_INFO.saved,i=e.headers.map["oj_access_token"][0],s=e.headers.map["oj_refresh_token"][0];o?(a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i,7),a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s,7)):(a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i),a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s))}else t==this.GLOBAL.OJ_ERROR_NOT_LOGIN&&(this.$message.error("操作失败，您未登录"),window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html")}))}},D=G,U=Object(c["a"])(D,B,F,!1,null,"4833b363",null),$=U.exports,M=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"problem-list"}},[o("loadings"),o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"60px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.problem,"cell-style":"cursor: pointer"}},[o("el-table-column",{attrs:{label:"ID",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[e._v(e._s(t.row.problemId))])]}}])}),o("el-table-column",{attrs:{label:"标题",width:"540"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[e._v(e._s(t.row.title))])]}}])}),o("el-table-column",{attrs:{label:"创建时间",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[e._v(e._s(e.format_time(t.row.createTime)))])]}}])}),o("el-table-column",{attrs:{label:"是否发布",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-switch",{staticStyle:{"margin-top":"-4px"},attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(o){return e.switchProblemState(t.row.problemId,"0"==t.row.isUsed?0:1,t.$index)}},model:{value:t.row.isUsed,callback:function(o){e.$set(t.row,"isUsed",o)},expression:"scope.row.isUsed"}})]}}])}),o("el-table-column",{attrs:{label:"创建人",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[e._v(e._s(t.row.creatorNick))])]}}])}),o("el-table-column",{attrs:{align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{"text-align":"left"}},[o("el-button",{staticStyle:{padding:"4px 8px","margin-right":"5px"},attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.$router.push({path:"/problem/problem/modify_content",query:{pid:t.row.problemId}})}}},[e._v("编辑 ")]),o("el-button",{staticStyle:{padding:"4px 8px"},attrs:{type:"danger",size:"mini"}},[e._v("删除 ")])],1),o("div",{staticStyle:{"margin-top":"5px","text-align":"left"}},[o("el-button",{staticStyle:{padding:"4px 8px"},attrs:{type:"warning",size:"mini"},on:{click:function(o){return e.$router.push({path:"/problem/problem/modify_testcase",query:{pid:t.row.problemId}})}}},[e._v("测试数据 ")])],1),o("div",{staticStyle:{"margin-top":"5px","text-align":"left"}},[o("el-button",{staticStyle:{padding:"4px 8px"},attrs:{type:"success",size:"mini"}},[e._v("分析")])],1)]}}])})],1)],1)],1)},V=[],j={name:"list",components:{loadings:E["a"]},data:function(){return{page_setting:{access_token:"",refresh_token:"",language:""},problem:{problemId:"",title:"",createTime:0,isUsed:"",creatorNick:""}}},methods:{switchProblemState:function(e,t,o){this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/problem/switch/statue",{is_used:t,problem_id:e},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(e){var t=e.body.OJ_ERROR_TYPE;if(t==this.GLOBAL.OJ_ERROR_NO_ERROR){this.$message({message:"操作成功",type:"success"});var i=e.body.OJ_USER_INFO.saved,s=e.headers.map["oj_access_token"][0],r=e.headers.map["oj_refresh_token"][0];i?(a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",s,7),a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",r,7)):(a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",s),a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",r))}else t==this.GLOBAL.OJ_ERROR_NOT_LOGIN?(this.$message.error("操作失败，您未登录"),window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html"):t==this.GLOBAL.OJ_ERROR_NON_EXISTENT_NEWS&&(this.$message.error("无效的操作"),this.news[o].isUsed="0"==this.news[o].isUsed?"1":"0")}))},format_time:function(e){return a["a"].format_time(e)}},created:function(){this.page_setting.access_token=a["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token"),this.page_setting.refresh_token=a["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token"),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/problem/home/list",{},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(e){console.log(e.body);var t=e.body.OJ_ERROR_TYPE;if(t==this.GLOBAL.OJ_ERROR_NO_ERROR){this.problem=e.body.OJ_PROBLEM;var o=e.body.OJ_USER_INFO.saved,i=e.headers.map["oj_access_token"][0],s=e.headers.map["oj_refresh_token"][0];o?(a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i,7),a["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s,7)):(a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i),a["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s));for(var r=0;r<this.problem.length;r++)this.problem[r].isUsed=this.problem[r].isUsed+""}else t==this.GLOBAL.OJ_ERROR_NOT_LOGIN&&(window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html")}))}},P=j,K=Object(c["a"])(P,M,V,!1,null,"076c0f21",null),W=K.exports,z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"problem-modify"}},[o("loadings"),o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"60px"}},[o("el-steps",{attrs:{active:0,"align-center":""}},[o("el-step",{attrs:{title:"步骤1",description:"修改题目内容"}}),o("el-step",{attrs:{title:"步骤2",description:"修改题目参数"}})],1),o("div",[o("el-button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:e.next_step}},[e._v("下一步 >>")])],1),o("div",{staticStyle:{clear:"both"}}),o("el-form",{ref:"form",staticStyle:{"margin-top":"15px"},attrs:{model:e.problem,"label-width":"80px"}},[o("el-timeline",[o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{staticStyle:{width:"50%"},on:{change:function(t){e.modify=!0}},model:{value:e.problem.title,callback:function(t){e.$set(e.problem,"title",t)},expression:"problem.title"}},[o("template",{slot:"prepend"},[e._v(e._s("ID "+e.problem.problemId))])],2)],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"orange"}},[o("el-form-item",{attrs:{label:"创建时间"}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",disabled:!0},model:{value:e.problem.createTime,callback:function(t){e.$set(e.problem,"createTime",t)},expression:"problem.createTime"}})],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"yellow"}},[o("el-form-item",{attrs:{label:"创建用户"}},[o("el-input",{staticStyle:{width:"30%"},attrs:{disabled:!0},model:{value:e.problem.creatorNick,callback:function(t){e.$set(e.problem,"creatorNick",t)},expression:"problem.creatorNick"}})],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"#5FBD12"}},[o("el-form-item",{attrs:{label:"题目描述"}},[o("div",{attrs:{id:"problem-description"}})])],1),o("el-timeline-item",{attrs:{placement:"top",color:"blue"}},[o("el-form-item",{attrs:{label:"输入描述"}},[o("div",{attrs:{id:"input-description"}})])],1),o("el-timeline-item",{attrs:{placement:"top",color:"purple"}},[o("el-form-item",{attrs:{label:"输出描述"}},[o("div",{attrs:{id:"output-description"}})])],1),e._l(e.problem.sampleIO,(function(t,i){return o("el-timeline-item",{key:e.key,attrs:{placement:"top",icon:"el-icon-more",type:"primary"}},[o("el-card",{attrs:{shadow:"never"}},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[e._v("样例"+e._s(" "+(i+1)))]),o("el-button",{staticStyle:{float:"right",padding:"5px"},attrs:{disabled:1==e.problem.sampleNum,type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.delSample(i)}}}),o("div",{staticStyle:{clear:"both"}})],1),o("el-row",[o("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:12}},[o("div",{staticClass:"grid-content bg-purple-dark"},[o("el-form-item",{attrs:{label:"样例输入"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:8,maxRows:16}},on:{change:function(t){e.modify=!0}},model:{value:t.sample_I,callback:function(o){e.$set(t,"sample_I",o)},expression:"data.sample_I"}})],1)],1)]),o("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:12}},[o("div",{staticClass:"grid-content bg-purple-dark"},[o("el-form-item",{attrs:{label:"样例输出"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:8,maxRows:16}},on:{change:function(t){e.modify=!0}},model:{value:t.sample_O,callback:function(o){e.$set(t,"sample_O",o)},expression:"data.sample_O"}})],1)],1)])],1)],1)],1)})),o("el-timeline-item",{attrs:{placement:"top",icon:"el-icon-more",type:"primary"}},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addSample}},[e._v("添加更多样例...")])],1),o("el-timeline-item",{attrs:{placement:"top",color:"purple"}},[o("el-form-item",{attrs:{label:"提示"}},[o("div",{attrs:{id:"hint"}})])],1),o("el-timeline-item",{attrs:{placement:"top",color:"purple"}},[o("div",{staticStyle:{"text-align":"center","margin-top":"30px","margin-bottom":"20px"}},[o("span",{staticStyle:{"white-space":"pre"}},[e._v("您可以选择"+e._s(" "))]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.edit(1,1)}}},[e._v("保存修改")]),o("span",{staticStyle:{"white-space":"pre"}},[e._v(e._s(" ")+"或保存修改并继续"+e._s(" "))]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.edit(1,2)}}},[e._v("修改题目参数")])],1)])],2)],1)],1),o("el-dialog",{attrs:{title:"你确定要删除吗？",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("span",[e._v("需要保存当前的修改吗？")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.edit(1,2)}}},[e._v("保存")]),o("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.edit(0,2)}}},[e._v("不保存")])],1)])],1)},q=[],Y=o("9591"),H=Y["a"],X=Object(c["a"])(H,z,q,!1,null,"61d97006",null),Q=X.exports,Z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"problem-modify"}},[o("loadings"),o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"60px"}},[o("el-steps",{attrs:{active:1,"align-center":""}},[o("el-step",{attrs:{title:"步骤1",description:"修改题目内容"}}),o("el-step",{attrs:{title:"步骤2",description:"修改题目参数"}})],1),o("div",[o("el-button",{staticStyle:{float:"left"},attrs:{type:"text"},on:{click:e.last_step}},[e._v(e._s("<< 上一步"))])],1),o("div",{staticStyle:{clear:"both"}}),o("el-form",{ref:"form",staticStyle:{"margin-top":"15px"},attrs:{model:e.problem,"label-width":"80px"}},[o("el-timeline",[o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{staticStyle:{width:"50%"},attrs:{disabled:!0},on:{change:function(t){e.modify=!0}},model:{value:e.problem.title,callback:function(t){e.$set(e.problem,"title",t)},expression:"problem.title"}},[o("template",{slot:"prepend"},[e._v(e._s("ID "+e.problem.problemId))])],2)],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"是否发布"}},[o("el-switch",{staticStyle:{"margin-top":"-4px"},attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){e.modify=!0}},model:{value:e.problem.isUsed,callback:function(t){e.$set(e.problem,"isUsed",t)},expression:"problem.isUsed"}})],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"时间"}},[o("el-input",{staticStyle:{width:"25%"},attrs:{type:"number"},on:{change:function(t){e.modify=!0}},model:{value:e.problem.timeLimit,callback:function(t){e.$set(e.problem,"timeLimit",t)},expression:"problem.timeLimit"}},[o("template",{slot:"append"},[e._v("ms")])],2),o("small",{staticStyle:{"margin-left":"15px",color:"red","font-weight":"bold"}},[e._v(" "+e._s((e.problem.timeLimit/1e3).toFixed(1)+" s")+" ")])],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"内存"}},[o("el-input",{staticStyle:{width:"25%"},attrs:{type:"number"},on:{change:function(t){e.modify=!0}},model:{value:e.problem.memoryLimit,callback:function(t){e.$set(e.problem,"memoryLimit",t)},expression:"problem.memoryLimit"}},[o("template",{slot:"append"},[e._v("KB")])],2),o("small",{staticStyle:{"margin-left":"15px",color:"red","font-weight":"bold"}},[e._v(" "+e._s((e.problem.memoryLimit/1024).toFixed(1)+" MB")+" ")])],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"特判"}},[o("el-switch",{staticStyle:{"margin-top":"-4px"},attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){e.modify=!0}},model:{value:e.problem.isSpj,callback:function(t){e.$set(e.problem,"isSpj",t)},expression:"problem.isSpj"}})],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"分类"}},[o("div",{staticStyle:{"line-height":"30px","margin-top":"5px","margin-bottom":"5px"},attrs:{id:"ProblemCategory"}},[e._l(e.problem.category,(function(t,i){return o("el-checkbox",{key:e.key,attrs:{checked:"",size:"medium",label:t.name,border:"",color:t.color},on:{change:function(t){return e.delCate(i)}}})})),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:"medium"},on:{click:e.chooseCate}})],2)])],1),o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"来源"}},[o("div",{staticStyle:{"line-height":"30px","margin-top":"5px","margin-bottom":"5px"},attrs:{id:"ProblemSource"}},[e._l(e.problem.source,(function(t,i){return o("el-checkbox",{key:e.key,attrs:{checked:"",size:"medium",label:t.name,border:"",color:t.color},on:{change:function(t){return e.delSour(i)}}})})),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:"medium"},on:{click:e.chooseSour}})],2)])],1),o("el-timeline-item",{attrs:{placement:"top",color:"purple"}},[o("div",{staticStyle:{"text-align":"center","margin-top":"30px","margin-bottom":"20px"}},[o("span",{staticStyle:{"white-space":"pre"}},[e._v("您可以选择"+e._s(" "))]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.edit(1,1)}}},[e._v("保存修改")]),o("span",{staticStyle:{"white-space":"pre"}},[e._v(e._s(" ")+"或保存修改并返回"+e._s(" "))]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.edit(1,2)}}},[e._v("修改题目内容")])],1)])],1)],1)],1),o("el-dialog",{attrs:{visible:e.category.dialogVisible,width:"80%"},on:{"update:visible":function(t){return e.$set(e.category,"dialogVisible",t)}}},[0!=e.category.lineCategory.length?o("el-collapse",{model:{value:e.category.data,callback:function(t){e.$set(e.category,"data",t)},expression:"category.data"}},e._l(e.category.category,(function(t,i){return o("el-collapse-item",{key:e.key,attrs:{title:t.main.name,name:i,active:""}},[o("div",{staticStyle:{"margin-left":"20px","margin-top":"10px"}},[o("el-collapse",{model:{value:e.category.data,callback:function(t){e.$set(e.category,"data",t)},expression:"category.data"}},[t.root.length>0?o("el-collapse-item",{attrs:{title:"基本算法",active:""}},[o("div",{staticStyle:{"margin-top":"10px"}},e._l(t.root,(function(t){return o("el-checkbox",{key:e.key,attrs:{size:"medium",label:t.name,border:"",color:t.color},on:{change:function(t){return e.upPreCate()}},model:{value:e.category.lineCategory[e.getCheckCateId(t.cateId)].check,callback:function(o){e.$set(e.category.lineCategory[e.getCheckCateId(t.cateId)],"check",o)},expression:"category.lineCategory[getCheckCateId(rootcate.cateId)].check"}})})),1)]):e._e(),e._l(t.noroot,(function(t){return o("el-collapse-item",{key:e.key,attrs:{title:t.main.name,active:""}},[o("div",{staticStyle:{"margin-top":"10px"}},e._l(t.root,(function(t){return o("el-checkbox",{key:e.key,attrs:{size:"medium",label:t.name,border:"",color:t.color},on:{change:function(t){return e.upPreCate()}},model:{value:e.category.lineCategory[e.getCheckCateId(t.cateId)].check,callback:function(o){e.$set(e.category.lineCategory[e.getCheckCateId(t.cateId)],"check",o)},expression:"category.lineCategory[getCheckCateId(rootcate.cateId)].check"}})})),1)])}))],2)],1)])})),1):e._e(),o("div",{staticStyle:{"margin-top":"20px"}},[o("span",[e._v("已选分类：")]),e._l(e.category.preCategory,(function(t){return o("el-checkbox",{key:e.key,attrs:{size:"medium",label:t.name,border:"",color:t.color},on:{change:function(o){return e.delPreCate(t.cateId)}},model:{value:e.category.lineCategory[e.getCheckCateId(t.cateId)].check,callback:function(o){e.$set(e.category.lineCategory[e.getCheckCateId(t.cateId)],"check",o)},expression:"category.lineCategory[getCheckCateId(cate.cateId)].check"}})}))],2),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.sureCate}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{visible:e.source.dialogVisible,width:"80%"},on:{"update:visible":function(t){return e.$set(e.source,"dialogVisible",t)}}},[0!=e.source.lineSource.length?o("el-collapse",{model:{value:e.source.data,callback:function(t){e.$set(e.source,"data",t)},expression:"source.data"}},e._l(e.source.source,(function(t,i){return o("el-collapse-item",{key:e.key,attrs:{title:t.main.name,name:i,active:""}},[o("div",{staticStyle:{"margin-left":"20px","margin-top":"10px"}},[o("el-collapse",{model:{value:e.source.data,callback:function(t){e.$set(e.source,"data",t)},expression:"source.data"}},[t.root.length>0?o("el-collapse-item",{attrs:{title:"基本来源",active:""}},[o("div",{staticStyle:{"margin-top":"10px"}},e._l(t.root,(function(t){return o("el-checkbox",{key:e.key,attrs:{size:"medium",label:t.name,border:"",color:t.color},on:{change:function(t){return e.upPreSour()}},model:{value:e.source.lineSource[e.getCheckSourId(t.sourceId)].check,callback:function(o){e.$set(e.source.lineSource[e.getCheckSourId(t.sourceId)],"check",o)},expression:"source.lineSource[getCheckSourId(rootsour.sourceId)].check"}})})),1)]):e._e(),e._l(t.noroot,(function(t){return o("el-collapse-item",{key:e.key,attrs:{title:t.main.name,active:""}},[o("div",{staticStyle:{"margin-top":"10px"}},e._l(t.root,(function(t){return o("el-checkbox",{key:e.key,attrs:{size:"medium",label:t.name,border:"",color:t.color},on:{change:function(t){return e.upPreSour()}},model:{value:e.source.lineSource[e.getCheckSourId(t.sourceId)].check,callback:function(o){e.$set(e.source.lineSource[e.getCheckSourId(t.sourceId)],"check",o)},expression:"source.lineSource[getCheckSourId(rootsour.sourceId)].check"}})})),1)])}))],2)],1)])})),1):e._e(),o("div",{staticStyle:{"margin-top":"20px"}},[o("span",[e._v("已选分类：")]),e._l(e.source.preSource,(function(t){return o("el-checkbox",{key:e.key,attrs:{size:"medium",label:t.name,border:"",color:t.color},on:{change:function(o){return e.delPreSour(t.sourceId)}},model:{value:e.source.lineSource[e.getCheckSourId(t.sourceId)].check,callback:function(o){e.$set(e.source.lineSource[e.getCheckSourId(t.sourceId)],"check",o)},expression:"source.lineSource[getCheckSourId(sour.sourceId)].check"}})}))],2),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.sureSour}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"你确定要删除吗？",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("span",[e._v("需要保存当前的修改吗？")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.edit(1,2)}}},[e._v("保存")]),o("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.edit(0,2)}}},[e._v("不保存")])],1)])],1)},ee=[],te=o("3b54"),oe=te["a"],ie=(o("50eb"),Object(c["a"])(oe,Z,ee,!1,null,"97722178",null)),se=ie.exports,re=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"problem-modify"}},[o("loadings"),o("el-row",{attrs:{gutter:20}},[o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:12}},[o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"60px"}},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.updating,expression:"updating"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.testcase,"tooltip-effect":"dark"}},[o("el-table-column",{attrs:{label:"序号","min-width":"60%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+1))]}}])}),o("el-table-column",{attrs:{label:"文件名","min-width":"120%"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1+".in")+" "),o("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(" / "))]),e._v(" "+e._s(t.$index+1+".out")+" ")]}}])}),o("el-table-column",{attrs:{prop:"name",label:"大小","min-width":"60%"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.transsize(t.row.inSize))+" "),o("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(" / "))]),e._v(" "+e._s(e.transsize(t.row.outSize))+" ")]}}])}),o("el-table-column",{attrs:{prop:"address",label:"操作","show-overflow-tooltip":"","min-width":"80%",align:"center"}},[[o("el-button",{attrs:{icon:"el-icon-plus",circle:"",size:"mini"}})]],2)],1)],1)],1),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:12}},[o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"60px"}},[o("div",{staticClass:"clearfix",staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[o("span",{staticStyle:{"text-align":"left"}},[e._v("添加数据")])]),o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",action:e.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/problem/add_testcase",data:{problem_id:e.$route.query.pid},"on-success":e.afterSuccessload,"before-upload":e.beforeUpload,"on-error":e.afterErrorload,"on-remove":e.afterErrorload,headers:{OJ_ACCESS_TOKEN:e.page_setting.access_token,OJ_REFRESH_TOKEN:e.page_setting.refresh_token},accept:".zip","auto-upload":"",limit:1}},[o("i",{staticClass:"el-icon-upload"}),o("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),o("em",[e._v("点击上传")])]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传zip文件，上传前会清空当前已存在的数据文件！")])])],1)],1)],1)],1)},ae=[],ne=o("bf3d"),le=ne["a"],ce=Object(c["a"])(le,re,ae,!1,null,"01f8dc86",null),he=ce.exports,pe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"problem_add"}},[o("loadings"),o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"60px"}},[o("el-steps",{attrs:{active:0,"align-center":""}},[o("el-step",{attrs:{title:"步骤1",description:"修改题目内容"}}),o("el-step",{attrs:{title:"步骤2",description:"修改题目参数"}}),o("el-step",{attrs:{title:"步骤3",description:"添加测试数据"}})],1),o("div",{staticStyle:{clear:"both"}}),o("el-form",{ref:"form",staticStyle:{"margin-top":"15px"},attrs:{model:e.problem,"label-width":"80px"}},[o("el-timeline",[o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{staticStyle:{width:"50%"},model:{value:e.problem.title,callback:function(t){e.$set(e.problem,"title",t)},expression:"problem.title"}})],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"yellow"}},[o("el-form-item",{attrs:{label:"创建用户"}},[o("el-input",{staticStyle:{width:"30%"},attrs:{disabled:!0},model:{value:e.user.nick,callback:function(t){e.$set(e.user,"nick",t)},expression:"user.nick"}})],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"#5FBD12"}},[o("el-form-item",{attrs:{label:"题目描述"}},[o("div",{attrs:{id:"problem-description"}})])],1),o("el-timeline-item",{attrs:{placement:"top",color:"blue"}},[o("el-form-item",{attrs:{label:"输入描述"}},[o("div",{attrs:{id:"input-description"}})])],1),o("el-timeline-item",{attrs:{placement:"top",color:"purple"}},[o("el-form-item",{attrs:{label:"输出描述"}},[o("div",{attrs:{id:"output-description"}})])],1),e._l(e.problem.sampleIO,(function(t,i){return o("el-timeline-item",{key:e.key,attrs:{placement:"top",icon:"el-icon-more",type:"primary"}},[o("el-card",{attrs:{shadow:"never"}},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[e._v("样例"+e._s(" "+(i+1)))]),o("el-button",{staticStyle:{float:"right",padding:"5px"},attrs:{disabled:1==e.problem.sampleNum,type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.delSample(i)}}}),o("div",{staticStyle:{clear:"both"}})],1),o("el-row",[o("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:12}},[o("div",{staticClass:"grid-content bg-purple-dark"},[o("el-form-item",{attrs:{label:"样例输入"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:8,maxRows:16}},model:{value:t.sample_I,callback:function(o){e.$set(t,"sample_I",o)},expression:"data.sample_I"}})],1)],1)]),o("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:12}},[o("div",{staticClass:"grid-content bg-purple-dark"},[o("el-form-item",{attrs:{label:"样例输出"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:8,maxRows:16}},model:{value:t.sample_O,callback:function(o){e.$set(t,"sample_O",o)},expression:"data.sample_O"}})],1)],1)])],1)],1)],1)})),o("el-timeline-item",{attrs:{placement:"top",icon:"el-icon-more",type:"primary"}},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addSample}},[e._v("添加更多样例...")])],1),o("el-timeline-item",{attrs:{placement:"top",color:"purple"}},[o("el-form-item",{attrs:{label:"提示"}},[o("div",{attrs:{id:"hint"}})])],1),o("el-timeline-item",{attrs:{placement:"top",color:"purple"}},[o("div",{staticStyle:{"text-align":"center","margin-top":"30px","margin-bottom":"20px"}},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.edit}},[e._v("下一步")])],1)])],2)],1)],1)],1)},me=[],ue=o("3ed7"),de=ue["a"],_e=Object(c["a"])(de,pe,me,!1,null,"172f7d92",null),ge=_e.exports,be=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"problem-add"}},[o("loadings"),o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"60px"}},[o("el-steps",{attrs:{active:1,"align-center":""}},[o("el-step",{attrs:{title:"步骤1",description:"修改题目内容"}}),o("el-step",{attrs:{title:"步骤2",description:"修改题目参数"}})],1),o("div",{staticStyle:{clear:"both"}}),o("el-form",{ref:"form",staticStyle:{"margin-top":"15px"},attrs:{model:e.problem,"label-width":"80px"}},[o("el-timeline",[o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{staticStyle:{width:"50%"},attrs:{disabled:!0},model:{value:e.problem.title,callback:function(t){e.$set(e.problem,"title",t)},expression:"problem.title"}},[o("template",{slot:"prepend"},[e._v(e._s("ID "+e.problem.problemId))])],2)],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"是否发布"}},[o("el-switch",{staticStyle:{"margin-top":"-4px"},attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.problem.isUsed,callback:function(t){e.$set(e.problem,"isUsed",t)},expression:"problem.isUsed"}})],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"时间"}},[o("el-input",{staticStyle:{width:"25%"},attrs:{type:"number"},model:{value:e.problem.timeLimit,callback:function(t){e.$set(e.problem,"timeLimit",t)},expression:"problem.timeLimit"}},[o("template",{slot:"append"},[e._v("ms")])],2),o("small",{staticStyle:{"margin-left":"15px",color:"red","font-weight":"bold"}},[e._v(" "+e._s((e.problem.timeLimit/1e3).toFixed(1)+" s")+" ")])],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"内存"}},[o("el-input",{staticStyle:{width:"25%"},attrs:{type:"number"},model:{value:e.problem.memoryLimit,callback:function(t){e.$set(e.problem,"memoryLimit",t)},expression:"problem.memoryLimit"}},[o("template",{slot:"append"},[e._v("KB")])],2),o("small",{staticStyle:{"margin-left":"15px",color:"red","font-weight":"bold"}},[e._v(" "+e._s((e.problem.memoryLimit/1024).toFixed(1)+" MB")+" ")])],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"特判"}},[o("el-switch",{staticStyle:{"margin-top":"-4px"},attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.problem.isSpj,callback:function(t){e.$set(e.problem,"isSpj",t)},expression:"problem.isSpj"}})],1)],1),o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"分类"}},[o("div",{staticStyle:{"line-height":"30px","margin-top":"5px","margin-bottom":"5px"},attrs:{id:"ProblemCategory"}},[e._l(e.problem.category,(function(t,i){return o("el-checkbox",{key:e.key,attrs:{checked:"",size:"medium",label:t.name,border:"",color:t.color},on:{change:function(t){return e.delCate(i)}}})})),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:"medium"},on:{click:e.chooseCate}})],2)])],1),o("el-timeline-item",{attrs:{placement:"top",color:"red"}},[o("el-form-item",{attrs:{label:"来源"}},[o("div",{staticStyle:{"line-height":"30px","margin-top":"5px","margin-bottom":"5px"},attrs:{id:"ProblemSource"}},[e._l(e.problem.source,(function(t,i){return o("el-checkbox",{key:e.key,attrs:{checked:"",size:"medium",label:t.name,border:"",color:t.color},on:{change:function(t){return e.delSour(i)}}})})),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:"medium"},on:{click:e.chooseSour}})],2)])],1),o("el-timeline-item",{attrs:{placement:"top",color:"purple"}},[o("div",{staticStyle:{"text-align":"center","margin-top":"30px","margin-bottom":"20px"}},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.edit}},[e._v("下一步")])],1)])],1)],1)],1),o("el-dialog",{attrs:{visible:e.category.dialogVisible,width:"80%"},on:{"update:visible":function(t){return e.$set(e.category,"dialogVisible",t)}}},[0!=e.category.lineCategory.length?o("el-collapse",{model:{value:e.category.data,callback:function(t){e.$set(e.category,"data",t)},expression:"category.data"}},e._l(e.category.category,(function(t,i){return o("el-collapse-item",{key:e.key,attrs:{title:t.main.name,name:i,active:""}},[o("div",{staticStyle:{"margin-left":"20px","margin-top":"10px"}},[o("el-collapse",{model:{value:e.category.data,callback:function(t){e.$set(e.category,"data",t)},expression:"category.data"}},[t.root.length>0?o("el-collapse-item",{attrs:{title:"基本算法",active:""}},[o("div",{staticStyle:{"margin-top":"10px"}},e._l(t.root,(function(t){return o("el-checkbox",{key:e.key,attrs:{size:"medium",label:t.name,border:"",color:t.color},on:{change:function(t){return e.upPreCate()}},model:{value:e.category.lineCategory[e.getCheckCateId(t.cateId)].check,callback:function(o){e.$set(e.category.lineCategory[e.getCheckCateId(t.cateId)],"check",o)},expression:"category.lineCategory[getCheckCateId(rootcate.cateId)].check"}})})),1)]):e._e(),e._l(t.noroot,(function(t){return o("el-collapse-item",{key:e.key,attrs:{title:t.main.name,active:""}},[o("div",{staticStyle:{"margin-top":"10px"}},e._l(t.root,(function(t){return o("el-checkbox",{key:e.key,attrs:{size:"medium",label:t.name,border:"",color:t.color},on:{change:function(t){return e.upPreCate()}},model:{value:e.category.lineCategory[e.getCheckCateId(t.cateId)].check,callback:function(o){e.$set(e.category.lineCategory[e.getCheckCateId(t.cateId)],"check",o)},expression:"category.lineCategory[getCheckCateId(rootcate.cateId)].check"}})})),1)])}))],2)],1)])})),1):e._e(),o("div",{staticStyle:{"margin-top":"20px"}},[o("span",[e._v("已选分类：")]),e._l(e.category.preCategory,(function(t){return o("el-checkbox",{key:e.key,attrs:{size:"medium",label:t.name,border:"",color:t.color},on:{change:function(o){return e.delPreCate(t.cateId)}},model:{value:e.category.lineCategory[e.getCheckCateId(t.cateId)].check,callback:function(o){e.$set(e.category.lineCategory[e.getCheckCateId(t.cateId)],"check",o)},expression:"category.lineCategory[getCheckCateId(cate.cateId)].check"}})}))],2),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.sureCate}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{visible:e.source.dialogVisible,width:"80%"},on:{"update:visible":function(t){return e.$set(e.source,"dialogVisible",t)}}},[0!=e.source.lineSource.length?o("el-collapse",{model:{value:e.source.data,callback:function(t){e.$set(e.source,"data",t)},expression:"source.data"}},e._l(e.source.source,(function(t,i){return o("el-collapse-item",{key:e.key,attrs:{title:t.main.name,name:i,active:""}},[o("div",{staticStyle:{"margin-left":"20px","margin-top":"10px"}},[o("el-collapse",{model:{value:e.source.data,callback:function(t){e.$set(e.source,"data",t)},expression:"source.data"}},[t.root.length>0?o("el-collapse-item",{attrs:{title:"基本来源",active:""}},[o("div",{staticStyle:{"margin-top":"10px"}},e._l(t.root,(function(t){return o("el-checkbox",{key:e.key,attrs:{size:"medium",label:t.name,border:"",color:t.color},on:{change:function(t){return e.upPreSour()}},model:{value:e.source.lineSource[e.getCheckSourId(t.sourceId)].check,callback:function(o){e.$set(e.source.lineSource[e.getCheckSourId(t.sourceId)],"check",o)},expression:"source.lineSource[getCheckSourId(rootsour.sourceId)].check"}})})),1)]):e._e(),e._l(t.noroot,(function(t){return o("el-collapse-item",{key:e.key,attrs:{title:t.main.name,active:""}},[o("div",{staticStyle:{"margin-top":"10px"}},e._l(t.root,(function(t){return o("el-checkbox",{key:e.key,attrs:{size:"medium",label:t.name,border:"",color:t.color},on:{change:function(t){return e.upPreSour()}},model:{value:e.source.lineSource[e.getCheckSourId(t.sourceId)].check,callback:function(o){e.$set(e.source.lineSource[e.getCheckSourId(t.sourceId)],"check",o)},expression:"source.lineSource[getCheckSourId(rootsour.sourceId)].check"}})})),1)])}))],2)],1)])})),1):e._e(),o("div",{staticStyle:{"margin-top":"20px"}},[o("span",[e._v("已选分类：")]),e._l(e.source.preSource,(function(t){return o("el-checkbox",{key:e.key,attrs:{size:"medium",label:t.name,border:"",color:t.color},on:{change:function(o){return e.delPreSour(t.sourceId)}},model:{value:e.source.lineSource[e.getCheckSourId(t.sourceId)].check,callback:function(o){e.$set(e.source.lineSource[e.getCheckSourId(t.sourceId)],"check",o)},expression:"source.lineSource[getCheckSourId(sour.sourceId)].check"}})}))],2),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.sureSour}},[e._v("确 定")])],1)],1)],1)},fe=[],Oe=o("f380"),ye=Oe["a"],ke=Object(c["a"])(ye,be,fe,!1,null,"6272b5c6",null),Ee=ke.exports;i["a"].use(u["a"]);var Le=[{path:"/",name:"index",component:O},{path:"/news/news/list",name:"news_list",component:S},{path:"/news/news/modify",name:"news_modify",component:I},{path:"/news/news/add",name:"news_add",component:$},{path:"/problem/problem/list",name:"problem_list",component:W},{path:"/problem/problem/modify_content",name:"problem_modify_content",component:Q},{path:"/problem/problem/modify_option",name:"problem_modify_option",component:se},{path:"/problem/problem/modify_testcase",name:"problem_modify_testcase",component:he},{path:"/problem/problem/add_content",name:"problem_add_content",component:ge},{path:"/problem/problem/add_option",name:"problem_add_option",component:Ee}],ve=new u["a"]({mode:"hash",routes:Le}),Ae=o("edad");i["a"].config.productionTip=!1,i["a"].prototype.GLOBAL=Ae["a"],i["a"].use(m["a"]);var Se=new m["a"]({locale:Ae["a"].OJ_DEFAULT_LANG,messages:a["a"].messages});new i["a"]({i18n:Se,router:ve,render:function(e){return e(p)}}).$mount("#index")},"5d06":function(e,t,o){},"66e7":function(e,t,o){"use strict";var i=o("5d06"),s=o.n(i);s.a},9591:function(e,t,o){"use strict";(function(e){o("d81d"),o("a434"),o("3495");var i=o("54a1"),s=o("2cd5"),r=o("ff41"),a=o.n(r);t["a"]={name:"modify",components:{loadings:i["a"]},data:function(){return{page_setting:{access_token:"",refresh_token:"",language:""},problem:{problemId:"",title:"",problemDescribe:"",inputDescribe:"",outputDescribe:"",createTime:0,hint:"",creatorNick:"",sampleNum:1,sampleIO:[{sample_I:"",sample_O:""}]},vditor:{problemDesciption:"",inputDescription:"",outputDescription:"",hint:""},dialogVisible:!1,modify:!1}},methods:{next_step:function(){1==this.modify||this.problem.problemDescribe!=this.vditor.problemDesciption.getValue()||this.problem.inputDescribe!=this.vditor.inputDescription.getValue()||this.problem.outputDescribe!=this.vditor.outputDescription.getValue()||this.problem.hint!=this.vditor.hint.getValue()?this.dialogVisible=!0:this.edit(0,2)},edit:function(e,t){0==e?this.$router.push({path:"/problem/problem/modify_option",query:{pid:this.$route.query.pid}}):(this.problem.problemDescribe=this.vditor.problemDesciption.getValue(),this.problem.inputDescribe=this.vditor.inputDescription.getValue(),this.problem.outputDescribe=this.vditor.outputDescription.getValue(),this.problem.hint=this.vditor.hint.getValue(),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/problem/modify_content",{problem_id:this.problem.problemId,title:this.problem.title,problem_describe:this.problem.problemDescribe,input_describe:this.problem.inputDescribe,output_describe:this.problem.outputDescribe,hint:this.problem.hint,sampleIO:JSON.stringify(this.problem.sampleIO)},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(e){var o=e.body.OJ_ERROR_TYPE;if(o==this.GLOBAL.OJ_ERROR_NO_ERROR){this.$message({message:"操作成功",type:"success"});var i=e.body.OJ_USER_INFO.saved,r=e.headers.map["oj_access_token"][0],a=e.headers.map["oj_refresh_token"][0];i?(s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",r,7),s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",a,7)):(s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",r),s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",a)),1==t?this.$router.push({path:"/problem/problem/list"}):2==t&&this.$router.push({path:"/problem/problem/modify_option",query:{pid:this.$route.query.pid}})}else o==this.GLOBAL.OJ_ERROR_NOT_LOGIN?(this.$message.error("操作失败，您未登录"),window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html"):o==this.GLOBAL.OJ_ERROR_NON_EXISTENT_NEWS&&this.$message.error("无效的操作")})))},addSample:function(){this.problem.sampleIO.push({sample_I:"",sample_O:""}),this.problem.sampleNum=this.problem.sampleIO.length},delSample:function(e){this.problem.sampleIO.splice(e,1),this.problem.sampleNum=this.problem.sampleIO.length}},mounted:function(){this.vditor.problemDesciption=new a.a("problem-description",{height:400,cache:{enable:!1},toolbarConfig:{pin:!0},tab:"\t",preview:{math:{inlineDigit:!0},markdown:{mark:!0},hljs:{style:"abap",lineNumber:!0}},counter:{enable:!0,type:"text"}}),this.vditor.inputDescription=new a.a("input-description",{height:400,cache:{enable:!1},toolbarConfig:{pin:!0},tab:"\t",preview:{math:{inlineDigit:!0},markdown:{mark:!0},hljs:{style:"abap",lineNumber:!0}},counter:{enable:!0,type:"text"}}),this.vditor.outputDescription=new a.a("output-description",{height:400,cache:{enable:!1},toolbarConfig:{pin:!0},tab:"\t",preview:{math:{inlineDigit:!0},markdown:{mark:!0},hljs:{style:"abap",lineNumber:!0}},counter:{enable:!0,type:"text"}}),this.vditor.hint=new a.a("hint",{height:400,cache:{enable:!1},toolbarConfig:{pin:!0},tab:"\t",preview:{math:{inlineDigit:!0},markdown:{mark:!0},hljs:{style:"abap",lineNumber:!0}},counter:{enable:!0,type:"text"}})},created:function(){null!=this.$route.query.pid&&""!=this.$route.query.pid||this.$router.push({path:"/problem/problem/list"}),this.page_setting.access_token=s["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token"),this.page_setting.refresh_token=s["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token"),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/problem/home/modify_content",{problem_id:this.$route.query.pid},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(t){console.log(t.body);var o=t.body.OJ_ERROR_TYPE;if(o==this.GLOBAL.OJ_ERROR_NO_ERROR){this.problem=t.body.OJ_PROBLEM,this.problem.sampleNum=this.problem.sampleIO.length,this.vditor.problemDesciption.setValue(this.problem.problemDescribe),this.vditor.inputDescription.setValue(this.problem.inputDescribe),this.vditor.outputDescription.setValue(this.problem.outputDescribe),this.vditor.hint.setValue(this.problem.hint);var i=t.body.OJ_USER_INFO.saved,r=t.headers.map["oj_access_token"][0],a=t.headers.map["oj_refresh_token"][0];i?(s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",r,7),s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",a,7)):(s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",r),s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",a))}else o==this.GLOBAL.OJ_ERROR_NOT_LOGIN&&(window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html");e("html,body").animate({scrollTop:"0px"},0)}),(function(){e("html,body").animate({scrollTop:"0px"},0)}))}}}).call(this,o("1157"))},"9ba3":function(e,t,o){},bf3d:function(e,t,o){"use strict";(function(e){o("d81d"),o("b680"),o("3495");var i=o("54a1"),s=o("2cd5");t["a"]={name:"modify_testcase",components:{loadings:i["a"]},data:function(){return{page_setting:{access_token:"",refresh_token:"",language:""},testcase:"",updating:!1}},methods:{transsize:function(e){return e<1e3?e+"B":(e/=1024,e<1e3?e.toFixed(1)+"K":(e/=1024,e<1e3?e.toFixed(1)+"M":(e/=1024,e<1e3?e.toFixed(1)+"G":(e/=1024,e.toFixed(1)+"T"))))},afterSuccessload:function(e){console.log(e);var t=e.OJ_ERROR_TYPE;t==this.GLOBAL.OJ_ERROR_NO_ERROR?this.testcase=e.OJ_TESTCASE:t==this.GLOBAL.OJ_ERROR_NOT_LOGIN&&(window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html");var o=this;this.updating=!1,setTimeout((function(){o.$refs.upload.clearFiles()}),1e3),console.log(e)},afterErrorload:function(){this.updating=!1;var e=this;setTimeout((function(){e.$refs.upload.clearFiles()}),1e3)},beforeUpload:function(){this.updating=!0}},created:function(){null!=this.$route.query.pid&&""!=this.$route.query.pid||this.$router.push({path:"/problem/problem/list"}),this.page_setting.access_token=s["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token"),this.page_setting.refresh_token=s["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token"),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/problem/home/modify_testcase",{problem_id:this.$route.query.pid},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(t){var o=t.body.OJ_ERROR_TYPE;if(o==this.GLOBAL.OJ_ERROR_NO_ERROR){this.testcase=t.body.OJ_TESTCASE,console.log(this.testcase);var i=t.body.OJ_USER_INFO.saved,r=t.headers.map["oj_access_token"][0],a=t.headers.map["oj_refresh_token"][0];i?(s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",r,7),s["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",a,7)):(s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",r),s["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",a))}else o==this.GLOBAL.OJ_ERROR_NOT_LOGIN&&(window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html");e("html,body").animate({scrollTop:"0px"},0)}),(function(){e("html,body").animate({scrollTop:"0px"},0)}))}}}).call(this,o("1157"))},f380:function(e,t,o){"use strict";(function(e){o("d81d"),o("a434"),o("3495");var i=o("54a1"),s=o("a026"),r=o("2cd5");t["a"]={name:"add_option",components:{loadings:i["a"]},data:function(){return{page_setting:{access_token:"",refresh_token:"",language:""},problem:{problemId:"",title:"",isUsed:"",isSpj:"",timeLimit:0,memoryLimit:0,category:[{cateId:0}],source:[{sourceId:0}]},category:{category:"",dialogVisible:!1,preCategory:"",lineCategory:[]},source:{source:"",dialogVisible:!1,preSource:"",lineSource:[]}}},methods:{edit:function(){this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/problem/add_option",{problem_id:this.problem.problemId,is_used:this.problem.isUsed,time_limit:this.problem.timeLimit,memory_limit:1024*this.problem.memoryLimit,is_spj:this.problem.isSpj,category:JSON.stringify(this.problem.category),source:JSON.stringify(this.problem.source)},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(e){var t=e.body.OJ_ERROR_TYPE;if(t==this.GLOBAL.OJ_ERROR_NO_ERROR){this.$message({message:"操作成功",type:"success"});var o=e.body.OJ_USER_INFO.saved,i=e.headers.map["oj_access_token"][0],s=e.headers.map["oj_refresh_token"][0];o?(r["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i,7),r["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s,7)):(r["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",i),r["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",s))}else t==this.GLOBAL.OJ_ERROR_NOT_LOGIN?(this.$message.error("操作失败，您未登录"),window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html"):t==this.GLOBAL.OJ_ERROR_NON_EXISTENT_NEWS&&this.$message.error("无效的操作")}))},sureCate:function(){this.category.dialogVisible=!1,this.problem.category=this.category.preCategory},sureSour:function(){this.source.dialogVisible=!1,this.problem.source=this.source.preSource},chooseCate:function(){this.category.preCategory=this.problem.category;for(var e=0;e<this.category.lineCategory.length;e++)this.category.lineCategory[e].check=!1;for(var t=0;t<this.category.preCategory.length;t++){var o=this.getCheckCateId(this.category.preCategory[t].cateId);this.category.lineCategory[o].check=!0}this.category.dialogVisible=!0},chooseSour:function(){this.source.preSource=this.problem.source;for(var e=0;e<this.source.lineSource.length;e++)this.source.lineSource[e].check=!1;for(var t=0;t<this.source.preSource.length;t++){var o=this.getCheckSourId(this.source.preSource[t].sourceId);this.source.lineSource[o].check=!0}this.source.dialogVisible=!0},getCheckCateId:function(e){var t=0,o=this.category.lineCategory.length-1;while(t<o){var i=t+o>>1;this.category.lineCategory[i].cateId<e?t=i+1:o=i}return t},getCheckSourId:function(e){var t=0,o=this.source.lineSource.length-1;while(t<o){var i=t+o>>1;this.source.lineSource[i].sourceId<e?t=i+1:o=i}return t},delCate:function(e){this.problem.category.splice(e,1)},delSour:function(e){this.problem.source.splice(e,1)},upPreCate:function(){this.category.preCategory=[];for(var e=0;e<this.category.lineCategory.length;e++)this.category.lineCategory[e].check&&this.category.preCategory.push(this.category.lineCategory[e])},upPreSour:function(){this.source.preSource=[];for(var e=0;e<this.source.lineSource.length;e++)this.source.lineSource[e].check&&this.source.preSource.push(this.source.lineSource[e])},delPreCate:function(e){var t=this.getCheckCateId(e);this.category.lineCategory[t].check=!1,this.upPreCate()},delPreSour:function(e){var t=this.getCheckSourId(e);this.source.lineSource[t].check=!1,this.upPreSour()},random_color:function(){var e=new Array("#F44336","#ff9800","#4CAF50","#8bc34a","#00bcd4","#2196F3","#9c27b0","#3f51b5","#009688","#e91e63"),t=Math.floor((Math.random()*e.length^Math.random()*e.length^Math.random()*e.length)%e.length);return e[t]}},created:function(){null!=this.$route.query.pid&&""!=this.$route.query.pid||this.$router.push({path:"/problem/problem/list"}),this.page_setting.access_token=r["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token"),this.page_setting.refresh_token=r["a"].getCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token"),this.$http.post(this.GLOBAL.OJ_DEFAULT_BACK_SERVE+"/admin/problem/home/add_option",{problem_id:this.$route.query.pid},{emulateJSON:!0,headers:{OJ_ACCESS_TOKEN:this.page_setting.access_token,OJ_REFRESH_TOKEN:this.page_setting.refresh_token}}).then((function(t){console.log(t.body);var o=t.body.OJ_ERROR_TYPE;if(o==this.GLOBAL.OJ_ERROR_NO_ERROR){this.problem=t.body.OJ_PROBLEM,this.problem.isUsed=this.problem.isUsed+"",this.problem.isSpj=this.problem.isSpj+"",this.problem.memoryLimit/=1024,console.log(this.problem),this.category.category=t.body.OJ_CATEGORY,this.source.source=t.body.OJ_SOURCE;for(var i=0;i<this.category.category.length;i++){for(var a=0;a<this.category.category[i].root.length;a++)s["a"].set(this.category.category[i].root[a],"color",this.random_color()),s["a"].set(this.category.category[i].root[a],"check",!1),s["a"].set(this.category.lineCategory,this.category.lineCategory.length,this.category.category[i].root[a]),console.log(this.category.category[i].root[a]);for(var n=0;n<this.category.category[i].noroot.length;n++)for(var l=0;l<this.category.category[i].noroot[n].root.length;l++)s["a"].set(this.category.category[i].noroot[n].root[l],"color",this.random_color()),s["a"].set(this.category.category[i].noroot[n].root[l],"check",!1),s["a"].set(this.category.lineCategory,this.category.lineCategory.length,this.category.category[i].noroot[n].root[l])}for(var c=0;c<this.source.source.length;c++){for(var h=0;h<this.source.source[c].root.length;h++)s["a"].set(this.source.source[c].root[h],"color",this.random_color()),s["a"].set(this.source.source[c].root[h],"check",!1),s["a"].set(this.source.lineSource,this.source.lineSource.length,this.source.source[c].root[h]),console.log(this.source.source[c].root[h]);for(var p=0;p<this.source.source[c].noroot.length;p++)for(var m=0;m<this.source.source[c].noroot[p].root.length;m++)s["a"].set(this.source.source[c].noroot[p].root[m],"color",this.random_color()),s["a"].set(this.source.source[c].noroot[p].root[m],"check",!1),s["a"].set(this.source.lineSource,this.source.lineSource.length,this.source.source[c].noroot[p].root[m])}this.category.lineCategory.sort((function(e,t){return e.cateId-t.cateId})),this.source.lineSource.sort((function(e,t){return e.sourceId-t.sourceId}));for(var u=0;u<this.problem.category.length;u++){var d=this.getCheckCateId(this.problem.category[u].cateId);this.category.lineCategory[d].check=!0,s["a"].set(this.problem.category[u],"color",this.category.lineCategory[d].color)}for(var _=0;_<this.problem.source.length;_++){var g=this.getCheckSourId(this.problem.source[_].sourceId);this.source.lineSource[g].check=!0,s["a"].set(this.problem.source[_],"color",this.source.lineSource[g].color)}this.category.preCategory=this.problem.category,this.source.preSource=this.problem.source,console.log(this.source.lineSource);var b=t.body.OJ_USER_INFO.saved,f=t.headers.map["oj_access_token"][0],O=t.headers.map["oj_refresh_token"][0];b?(r["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",f,7),r["a"].setCookieWithTime(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",O,7)):(r["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"access_token",f),r["a"].setCookie(this.GLOBAL.OJ_DEFAULT_NAME+"refresh_token",O))}else o==this.GLOBAL.OJ_ERROR_NOT_LOGIN&&(window.location.href=this.GLOBAL.OJ_DEFAULT_FRONT_SERVE+"/login.html");e("html,body").animate({scrollTop:"0px"},0)}),(function(){e("html,body").animate({scrollTop:"0px"},0)}))}}}).call(this,o("1157"))}});
//# sourceMappingURL=index.008b75b2.js.map